<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>案例_购物车计费功能</title>
    <meta name="Keywords" content="关键词,关键词">
    <meta name="description" content="">
    <!--css/js-->
    <style type="text/css">
        *{margin:0px; padding:0px;list-style-type:none; }
        #goods{width:1000px;border:1px solid #cc0066;margin:50px auto 0px;}
        #goods h3{line-height:50px;height:50px;background:#cc3366; color:#fff; font-size:14px; }
        #goods h3 span,#goods ul li span{display:block;width:249px; border-right:1px solid #993300;  float:left; text-align:center;}
        #goods h3 span:nth-of-type(4){width:250px;border:0px;}
        #goods ul li{height:100px; border-bottom:1px solid #993300;}
        #goods ul li span{height:100px;line-height:100px; position:relative;}
        #goods ul li span:nth-of-type(4){width:250px; border:0px;}
        #goods ul li:last-child{border-bottom:0px;}
        #goods ul li span img{margin-top:10px;}
        #goods ul li span b{line-height:30px;display:inline-block; width:30px; height:30px; background:#ddd; position:absolute; cursor:pointer;}
        #goods ul li span b.down{left:50px; top:35px;}
        #goods ul li span b.up{left:150px; top:35px;}
        #goods ul li span input{left:80px; top:35px; width:70px;height:28px; border:1px solid #ddd;position:absolute;
            text-align:center; line-height:28px; font-size:12px; color:red; }
        .price{height:50px;background:#cc3366; color:#fff; font-size:14px; line-height:50px;
            margin:10px auto; width:1000px;}
        .price span{width:250px;float:left; display:block;height:50px;}
        .price span b{font-size:20px; color:#ffff99}
    </style>
</head>

<body>


<div id="goods">
    <h3><span>商品</span><span>单价</span><span>数量</span><span>小计</span></h3>
    <ul>
        <li>
			<span>
                <img src="images/shop1.jpg" width="80"/>
            </span>
            <span class="dj">8</span>
            <span>
                <b class="down">-</b>
                <input type="text" value='0' />
                <b class="up">+</b>
            </span>
            <span class="xj">0</span>
        </li>

        <li><span><img src="images/shop2.jpg" width="80"/></span>
            <span class="dj">10</span>
            <span><b class="down">-</b><input type="text" value='0'/><b class="up">+</b></span>
            <span class="xj">0</span>
        </li>

        <li>
            <span><img src="images/shop3.jpg" width="80"/></span>
            <span class="dj">12.5</span>
            <span><b class="down">-</b><input type="text" value='0'/><b class="up">+</b></span>
            <span class="xj">0</span>
        </li>

        <li>
            <span><img src="images/shop4.jpg" width="80"/></span>
            <span class="dj">23</span>
            <span>
                <b class="down">-</b>
                <input type="text" value='0'/>
                <b class="up">+</b>
            </span>
            <span class="xj">0</span>
        </li>
    </ul>
</div>
<div class="price" id="price">
    <span></span><span></span>
    <span>
        已选中商品:&nbsp;
        <b>0</b>&nbsp;个
    </span>
    <span>
        合计费用:
        <b>0</b>&nbsp;￥
    </span>
</div>


<script>

    /*
     x ++;
     先强制将x转换为 数字，在加1
     */

    //四个up  四个down  四个input   一一对应
    var _down = document.querySelectorAll("#goods ul li span b.down"),
        _up = document.querySelectorAll("#goods ul li span b.up"),
        _inputVal =  document.querySelectorAll("#goods ul li span input"),
        _dj = document.querySelectorAll(".dj"),
        _xj = document.querySelectorAll(".xj"),
        _total = document.querySelectorAll("#price span b"),
        length = _inputVal.length;
     //alert(_inputVal.value);

        for(var i = 0;i < length;i++){
            _up[i].index = i;
            _up[i].onclick = function () {
                var count = this.index;
                var val =  _inputVal[this.index].value;
                _inputVal[count].value = ++val;

                cop(count);


 /*         var x = 0;
            var y = 0;
            for(var i = 0;i < length;i++){

                x += _inputVal[i].value * 1;//强制类型转换
                _total[0].innerHTML = x;

                y += _xj[i].innerHTML * 1;
                _total[1].innerHTML = y;
            }*/

/*                _xj[count].innerHTML = _inputVal[count].value * _dj[count].innerHTML;
             _total[0].innerHTML = sum(true);
             _total[1].innerHTML = sum(false);*/

        }

            _down[i].index = i;
            _down[i].onclick = function () {
                var count = this.index;

                var val = _inputVal[count].value;
                val--;
                if(val < 0){
                    val = 0;
                }
                _inputVal[count].value = val;
                cop(count);

/*                _xj[count].innerHTML = _inputVal[count].value * _dj[count].innerHTML;
                _total[0].innerHTML = sum(true);
                _total[1].innerHTML = sum(false);*/


            }
    }

        function sum(bool) {
            var x = 0;
            for (var i = 0;i < length;i++){
                if(bool){
                    x += _inputVal[i].value * 1;
                }else {
                    x += _xj[i].innerHTML * 1;
                }
            }
            return x;
        }



        function cop(Xcount) {
            _xj[Xcount].innerHTML = _inputVal[Xcount].value * _dj[Xcount].innerHTML;
            _total[0].innerHTML = sum(true);
            _total[1].innerHTML = sum(false);
        }



/*    var c = "a#b#c#d";
    var d = c.split("#");
    console.log(d);*/
</script>
</body>
</html>





















